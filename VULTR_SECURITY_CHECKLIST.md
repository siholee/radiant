# Vultr ë°°í¬ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

## ğŸ’» ê¶Œì¥ ì„œë²„ ìŠ¤í™

### ìš´ì˜ì²´ì œ (OS)
- **ê¶Œì¥**: Ubuntu 22.04 LTS (Jammy Jellyfish) â­
- **ëŒ€ì•ˆ**: Ubuntu 24.04 LTS
- **ì•„í‚¤í…ì²˜**: x64

**Ubuntu 22.04 LTSë¥¼ ê¶Œì¥í•˜ëŠ” ì´ìœ :**
- ì¥ê¸° ì§€ì› (2027ë…„ê¹Œì§€)
- Docker ê³µì‹ ì§€ì›
- ì»¤ë®¤ë‹ˆí‹° ë¬¸ì„œ í’ë¶€
- ì•ˆì •ì„± ê²€ì¦ë¨
- Certbot (Let's Encrypt) ì™„ë²½ ì§€ì›
- ë³´ì•ˆ íŒ¨ì¹˜ ìë™ ì—…ë°ì´íŠ¸

**í”¼í•´ì•¼ í•  OS:**
- âŒ CentOS/RHEL (íŒ¨í‚¤ì§€ ê´€ë¦¬ ë³µì¡)
- âŒ Debian 10 ì´í•˜ (êµ¬ë²„ì „)
- âŒ Windows Server (Docker ì„±ëŠ¥ ì´ìŠˆ)

### ìµœì†Œ ì‚¬ì–‘ (ê°œë°œ/í…ŒìŠ¤íŠ¸)
- **vCPU**: 2 Core
- **ë©”ëª¨ë¦¬**: 4 GB RAM
- **ìŠ¤í† ë¦¬ì§€**: 80 GB SSD
- **ëŒ€ì—­í­**: 3 TB
- **ì˜ˆìƒ ë¹„ìš©**: ~$18/ì›”

**ì í•©í•œ ìš©ë„:**
- ê°œë°œ/ìŠ¤í…Œì´ì§• í™˜ê²½
- ì†Œê·œëª¨ í…ŒìŠ¤íŠ¸
- ì›” 1ë§Œ ë°©ë¬¸ì ì´í•˜

### ê¶Œì¥ ì‚¬ì–‘ (í”„ë¡œë•ì…˜ - ì†Œê·œëª¨)
- **vCPU**: 4 Core
- **ë©”ëª¨ë¦¬**: 8 GB RAM
- **ìŠ¤í† ë¦¬ì§€**: 160 GB SSD
- **ëŒ€ì—­í­**: 4 TB
- **ì˜ˆìƒ ë¹„ìš©**: ~$36/ì›”

**ì í•©í•œ ìš©ë„:**
- í”„ë¡œë•ì…˜ í™˜ê²½ ì‹œì‘
- ì›” 10ë§Œ ë°©ë¬¸ì
- ë™ì‹œ ì‚¬ìš©ì ~500ëª…
- AI ë¸”ë¡œê·¸ ìƒì„± ì›” 100ê±´

### í”„ë¡œë•ì…˜ ì‚¬ì–‘ (ê¶Œì¥)
- **vCPU**: 6 Core
- **ë©”ëª¨ë¦¬**: 16 GB RAM
- **ìŠ¤í† ë¦¬ì§€**: 320 GB SSD
- **ëŒ€ì—­í­**: 5 TB
- **ì˜ˆìƒ ë¹„ìš©**: ~$72/ì›”

**ì í•©í•œ ìš©ë„:**
- ë³¸ê²©ì ì¸ í”„ë¡œë•ì…˜
- ì›” 50ë§Œ ë°©ë¬¸ì
- ë™ì‹œ ì‚¬ìš©ì ~2,000ëª…
- AI ë¸”ë¡œê·¸ ìƒì„± ì›” 500ê±´
- pgvector ì„ë² ë”© ì‘ì—… ì›í™œ

### ê³ ì„±ëŠ¥ ì‚¬ì–‘ (ëŒ€ê·œëª¨ íŠ¸ë˜í”½)
- **vCPU**: 8+ Core
- **ë©”ëª¨ë¦¬**: 32 GB RAM
- **ìŠ¤í† ë¦¬ì§€**: 640 GB SSD
- **ëŒ€ì—­í­**: 6 TB
- **ì˜ˆìƒ ë¹„ìš©**: ~$144/ì›”

**ì í•©í•œ ìš©ë„:**
- ëŒ€ê·œëª¨ íŠ¸ë˜í”½
- ì›” 100ë§Œ+ ë°©ë¬¸ì
- ë™ì‹œ ì‚¬ìš©ì 5,000ëª…+
- ëŒ€ëŸ‰ AI ìƒì„± ì‘ì—…

### ğŸ“Š ë¦¬ì†ŒìŠ¤ ì‚¬ìš© ì˜ˆìƒì¹˜

**Docker ì»¨í…Œì´ë„ˆë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©:**
- Next.js App: ~512 MB - 1 GB
- PostgreSQL (pgvector): ~256 MB - 1 GB
- Redis: ~50 MB - 200 MB
- Nginx: ~10 MB - 50 MB
- Python CrewAI (ì‹¤í–‰ ì‹œ): ~500 MB - 2 GB

**ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©:**
- Docker ì´ë¯¸ì§€: ~3 GB
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ: ~500 MB
- ë°ì´í„°ë² ì´ìŠ¤ (ì´ˆê¸°): ~100 MB
- ë¡œê·¸ íŒŒì¼: ~1 GB/ì›”
- ì—¬ìœ  ê³µê°„: ìµœì†Œ 50% ê¶Œì¥

### ğŸš€ ìŠ¤ì¼€ì¼ë§ ì „ëµ

**íŠ¸ë˜í”½ ì¦ê°€ ì‹œ ì—…ê·¸ë ˆì´ë“œ ìˆœì„œ:**
1. **ë©”ëª¨ë¦¬ ë¨¼ì €**: 4GB â†’ 8GB â†’ 16GB
2. **vCPU ë‹¤ìŒ**: 2 Core â†’ 4 Core â†’ 6 Core
3. **ìŠ¤í† ë¦¬ì§€ ë‚˜ì¤‘**: í•„ìš” ì‹œ ì¦ì„¤

**ëª¨ë‹ˆí„°ë§ ì§€í‘œ:**
```bash
# ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ì´ 80% ë„˜ìœ¼ë©´ ì—…ê·¸ë ˆì´ë“œ
free -h

# CPU ì‚¬ìš©ë¥ ì´ ì§€ì†ì ìœ¼ë¡œ 70% ë„˜ìœ¼ë©´ ì—…ê·¸ë ˆì´ë“œ
htop

# ë””ìŠ¤í¬ ì‚¬ìš©ë¥ ì´ 70% ë„˜ìœ¼ë©´ ì¦ì„¤
df -h
```

---

## ğŸ¯ ë°°í¬ ì „ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1ë‹¨ê³„: ì„œë²„ ì´ˆê¸° ì„¤ì • (ìµœì´ˆ 1íšŒë§Œ)

```bash
# Vultr ì„œë²„ ìƒì„± í›„ rootë¡œ SSH ì ‘ì†
ssh root@YOUR_SERVER_IP

# ë³´ì•ˆ ê°•í™” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
cd /root
git clone https://github.com/YOUR_USERNAME/radiant.git
cd radiant
bash vultr-setup.sh
```

ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” í•­ëª©:
- âœ… UFW ë°©í™”ë²½ (í¬íŠ¸ 22, 80, 443ë§Œ ì˜¤í”ˆ)
- âœ… Fail2ban (SSH, Nginx ê³µê²© ì°¨ë‹¨)
- âœ… SSH ê°•í™” (í‚¤ ê¸°ë°˜ ì¸ì¦, root ë¡œê·¸ì¸ ê¸ˆì§€)
- âœ… ìë™ ë³´ì•ˆ ì—…ë°ì´íŠ¸
- âœ… Docker & Docker Compose
- âœ… Nginx ì„¤ì¹˜ ë° ë³´ì•ˆ í—¤ë”
- âœ… Certbot (Let's Encrypt SSL)
- âœ… ì‹œìŠ¤í…œ íŠœë‹

### 2ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
# deploy ìœ ì €ë¡œ ì „í™˜
su - deploy
cd /var/www/radiant

# .env íŒŒì¼ ìƒì„±
cp .env.example .env
nano .env
```

**í•„ìˆ˜: ëª¨ë“  ë¹„ë°€ í‚¤ë¥¼ ê°•ë ¥í•˜ê²Œ ìƒì„±í•˜ì„¸ìš”!**

```bash
# í„°ë¯¸ë„ì—ì„œ ê°ê° ì‹¤í–‰í•˜ì—¬ ìƒì„±
echo "POSTGRES_PASSWORD=$(openssl rand -base64 32)"
echo "REDIS_PASSWORD=$(openssl rand -base64 32)"
echo "SESSION_SECRET=$(openssl rand -hex 64)"
echo "JWT_SECRET=$(openssl rand -hex 64)"
echo "ENCRYPTION_KEY_V1=$(openssl rand -hex 32)"
```

### 3ë‹¨ê³„: SSL ì¸ì¦ì„œ ì„¤ì •

```bash
# Nginx ì„¤ì • ë³µì‚¬
sudo cp nginx.conf /etc/nginx/sites-available/yurasis.com
sudo ln -s /etc/nginx/sites-available/yurasis.com /etc/nginx/sites-enabled/
sudo rm /etc/nginx/sites-enabled/default  # ê¸°ë³¸ ì‚¬ì´íŠ¸ ì œê±°

# Nginx ì„¤ì • í…ŒìŠ¤íŠ¸
sudo nginx -t

# Let's Encrypt SSL ì¸ì¦ì„œ ë°œê¸‰
sudo certbot --nginx -d yurasis.com -d www.yurasis.com --non-interactive --agree-tos -m your-email@example.com

# ìë™ ê°±ì‹  í™•ì¸
sudo certbot renew --dry-run
```

### 4ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬

```bash
# ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (deploy ìœ ì €ë¡œ)
cd /var/www/radiant
bash deploy.sh
```

---

## ğŸ›¡ï¸ ê³µê²© ë°©ì–´ ì‹œìŠ¤í…œ (ìë™ í™œì„±í™”)

### Nginx Rate Limiting

í˜„ì¬ ì„¤ì •ëœ ì œí•œ:
- **ì¼ë°˜ ìš”ì²­**: 10 req/sec (burst 20)
- **API ìš”ì²­**: 5 req/sec (burst 10)
- **ì¸ì¦ ìš”ì²­**: 3 req/min (burst 5)

ì´ˆê³¼ ì‹œ **429 Too Many Requests** ë°˜í™˜

### Fail2ban ìë™ ì°¨ë‹¨

ë‹¤ìŒ ì¡°ê±´ì—ì„œ IP ìë™ ì°¨ë‹¨:
- SSH ë¡œê·¸ì¸ ì‹¤íŒ¨ 3íšŒ â†’ 24ì‹œê°„ ì°¨ë‹¨
- Nginx auth ì‹¤íŒ¨ 5íšŒ â†’ 1ì‹œê°„ ì°¨ë‹¨
- Nginx rate limit ì´ˆê³¼ 5íšŒ â†’ 1ì‹œê°„ ì°¨ë‹¨

ì°¨ë‹¨ëœ IP í™•ì¸:
```bash
sudo fail2ban-client status nginx-limit-req
sudo fail2ban-client status sshd
```

IP ìˆ˜ë™ ì°¨ë‹¨ í•´ì œ:
```bash
sudo fail2ban-client set nginx-limit-req unbanip IP_ADDRESS
```

### UFW ë°©í™”ë²½

```bash
# ìƒíƒœ í™•ì¸
sudo ufw status verbose

# í—ˆìš©ëœ í¬íŠ¸ë§Œ ì ‘ê·¼ ê°€ëŠ¥:
# - 22 (SSH)
# - 80 (HTTP â†’ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸)
# - 443 (HTTPS)

# ê¸°íƒ€ ëª¨ë“  í¬íŠ¸ëŠ” ì°¨ë‹¨ë¨
# - 5432 (PostgreSQL) âœ… ì™¸ë¶€ ì ‘ê·¼ ë¶ˆê°€
# - 6379 (Redis) âœ… ì™¸ë¶€ ì ‘ê·¼ ë¶ˆê°€
# - 3000 (Next.js) âœ… ì™¸ë¶€ ì ‘ê·¼ ë¶ˆê°€
```

---

## ğŸ” ë°°í¬ í›„ ë³´ì•ˆ ì ê²€

### 1. í¬íŠ¸ ìŠ¤ìº” í…ŒìŠ¤íŠ¸

```bash
# ì™¸ë¶€ì—ì„œ ì—´ë¦° í¬íŠ¸ í™•ì¸ (ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰)
nmap -sV YOUR_SERVER_IP

# ì˜ˆìƒ ê²°ê³¼:
# PORT    STATE SERVICE
# 22/tcp  open  ssh
# 80/tcp  open  http
# 443/tcp open  https
```

### 2. SSL ì¸ì¦ì„œ í™•ì¸

```bash
# SSL Labsì—ì„œ A+ ë“±ê¸‰ í™•ì¸
# https://www.ssllabs.com/ssltest/analyze.html?d=yurasis.com
```

### 3. ë³´ì•ˆ í—¤ë” í™•ì¸

```bash
curl -I https://yurasis.com | grep -i "security\|xss\|content-security\|strict-transport"

# ì˜ˆìƒ ê²°ê³¼:
# Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
# X-Frame-Options: SAMEORIGIN
# X-Content-Type-Options: nosniff
# X-XSS-Protection: 1; mode=block
# Content-Security-Policy: ...
```

### 4. Rate Limiting í…ŒìŠ¤íŠ¸

```bash
# ì§§ì€ ì‹œê°„ì— ì—¬ëŸ¬ ìš”ì²­ ì „ì†¡
for i in {1..50}; do curl -s -o /dev/null -w "%{http_code}\n" https://yurasis.com/api/auth/login; done

# ì˜ˆìƒ ê²°ê³¼: ì²˜ìŒ ëª‡ ê°œëŠ” 200/401, ì´í›„ 429 (Too Many Requests)
```

### 5. ë°ì´í„°ë² ì´ìŠ¤ ì™¸ë¶€ ì ‘ê·¼ ì°¨ë‹¨ í™•ì¸

```bash
# ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰ (ì—°ê²° ì‹¤íŒ¨í•´ì•¼ ì •ìƒ)
telnet YOUR_SERVER_IP 5432

# ì˜ˆìƒ ê²°ê³¼: Connection refused ë˜ëŠ” timeout
```

---

## ğŸš¨ ê¸´ê¸‰ ëŒ€ì‘ ë§¤ë‰´ì–¼

### DDoS ê³µê²© ê°ì§€ ì‹œ

```bash
# 1. ì‹¤ì‹œê°„ ì ‘ì† IP í™•ì¸
sudo tail -f /var/log/nginx/yurasis.com.access.log

# 2. íŠ¹ì • IP ìˆ˜ë™ ì°¨ë‹¨
sudo ufw deny from ATTACKER_IP

# 3. Fail2banìœ¼ë¡œ ì˜êµ¬ ì°¨ë‹¨
sudo fail2ban-client set nginx-limit-req banip ATTACKER_IP

# 4. CloudFlare "Under Attack" ëª¨ë“œ í™œì„±í™” (ì‚¬ìš© ì‹œ)
```

### ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§

```bash
# CPU, ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  í™•ì¸
htop

# ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
df -h

# ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
ss -tunap

# Docker ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker compose ps
docker stats
```

### ë¡œê·¸ ë¶„ì„

```bash
# Nginx ì—ëŸ¬ ë¡œê·¸
sudo tail -f /var/log/nginx/yurasis.com.error.log

# Fail2ban ë¡œê·¸
sudo tail -f /var/log/fail2ban.log

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
docker compose logs -f app --tail 100
```

---

## ğŸ” ì¶”ê°€ ë³´ì•ˆ ê¶Œì¥ì‚¬í•­

### 1. CloudFlare ì‚¬ìš© (ê°•ë ¥ ê¶Œì¥)

**ì¥ì :**
- DDoS ë³´í˜¸
- ì›¹ ë°©í™”ë²½ (WAF)
- ë´‡ ì°¨ë‹¨
- ì‹¤ì œ ì„œë²„ IP ìˆ¨ê¹€
- ë¬´ë£Œ í”Œëœìœ¼ë¡œë„ ì¶©ë¶„

**ì„¤ì •:**
1. CloudFlareì— ë„ë©”ì¸ ì¶”ê°€
2. ë„¤ì„ì„œë²„ ë³€ê²½
3. SSL/TLS: Full (strict)
4. Firewall Rules ì¶”ê°€
5. Rate Limiting ì¶”ê°€
6. Bot Fight Mode í™œì„±í™”

### 2. ì •ê¸° ë°±ì—…

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
docker compose exec postgres pg_dump -U radiant radiant > backup_$(date +%Y%m%d).sql

# ë°±ì—… ìë™í™” (crontab)
0 2 * * * cd /var/www/radiant && docker compose exec -T postgres pg_dump -U radiant radiant > /backups/db_$(date +\%Y\%m\%d).sql
```

### 3. ëª¨ë‹ˆí„°ë§ ì„¤ì •

```bash
# Uptime Robot (ë¬´ë£Œ) - ë‹¤ìš´íƒ€ì„ ëª¨ë‹ˆí„°ë§
# https://uptimerobot.com

# Sentry (ë¬´ë£Œ) - ì—ëŸ¬ íŠ¸ë˜í‚¹
# Next.jsì— Sentry SDK ì¶”ê°€
```

### 4. ì •ê¸° ë³´ì•ˆ ì—…ë°ì´íŠ¸

```bash
# ë§¤ì£¼ ì‹¤í–‰ ê¶Œì¥
sudo apt update
sudo apt upgrade -y
sudo reboot
```

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ ì „ ì´ í•­ëª©ë“¤ì„ ëª¨ë‘ í™•ì¸í•˜ì„¸ìš”:

- [ ] `vultr-setup.sh` ì‹¤í–‰ ì™„ë£Œ
- [ ] UFW ë°©í™”ë²½ í™œì„±í™” (`sudo ufw status`)
- [ ] Fail2ban ì‹¤í–‰ ì¤‘ (`sudo systemctl status fail2ban`)
- [ ] SSH í‚¤ ê¸°ë°˜ ì¸ì¦ ì„¤ì •
- [ ] root ë¡œê·¸ì¸ ë¹„í™œì„±í™”
- [ ] `.env` íŒŒì¼ì— ê°•ë ¥í•œ ë¹„ë°€ í‚¤ ì„¤ì •
- [ ] Let's Encrypt SSL ì¸ì¦ì„œ ë°œê¸‰
- [ ] Nginx ë³´ì•ˆ í—¤ë” ì ìš©
- [ ] Rate Limiting ë™ì‘ í™•ì¸
- [ ] í¬íŠ¸ 5432, 6379, 3000 ì™¸ë¶€ ì°¨ë‹¨ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì„¤ì •
- [ ] CloudFlare ì„¤ì • (ì„ íƒ)
- [ ] ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì„¤ì • (ì„ íƒ)

---

## ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ

1. **ë¡œê·¸ í™•ì¸**: `docker compose logs -f`
2. **ì»¨í…Œì´ë„ˆ ìƒíƒœ**: `docker compose ps`
3. **ë°©í™”ë²½ ë¡œê·¸**: `sudo tail -f /var/log/ufw.log`
4. **Fail2ban ìƒíƒœ**: `sudo fail2ban-client status`

**ê¸´ê¸‰ ë³µêµ¬:**
```bash
# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker compose restart

# ì „ì²´ ì¬ë°°í¬
cd /var/www/radiant
git pull origin main
bash deploy.sh
```
